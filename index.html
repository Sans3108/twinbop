<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Twinbop?</title>
    <link rel="icon" type="image/png" href="https://teedata.net/api/skin/render/name/twinbop?emotion=default_eye" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta property="og:title" content="Twinbop?" />
    <meta property="og:description" content="Twinbop?!" />
    <meta property="og:image" content="https://teedata.net/api/skin/render/name/twinbop?emotion=happy_eye" />
    <meta property="og:type" content="website" />

    <style>
      html,
      body {
        margin: 0;
        height: 100%;
        overflow: hidden;
        background: white;
      }

      #twinbopImg {
        position: absolute;
        width: 20vw;
        /* scales with viewport width */
        height: 20vw;
        max-width: 150px;
        /* caps the size on large screens */
        max-height: 150px;
        top: -300px;
        /* start outside the page */
        left: 50%;
        transform: translateX(-50%);
        transition: transform 0.05s linear;
      }

      #prankText {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        opacity: 0;
        z-index: 2;
        color: black;
        font-family: sans-serif;
        padding: 0 5vw;
      }

      #prankText h1 {
        font-size: 2em;
        /* scales on mobile */
        margin: 0;
      }

      #prankText h1 img {
        height: 1.5em;
        vertical-align: middle;
      }

      #prankText a {
        color: blue;
        font-size: 1em;
        text-decoration: underline;
        display: block;
        margin-top: 2vw;
      }

      #bottomLeftTrick {
        position: fixed;
        left: 10px;
        top: 10px;
        font-size: 1.7em;
        color: #444;
        font-family: sans-serif;
        border-radius: 10px;
        padding: 0;
        z-index: 10;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        background: none;
        box-shadow: none;
        opacity: 0; /* Start hidden */
        transition: opacity 1s ease;
      }
    </style>
  </head>

  <body>
    <div id="bottomLeftTrick">
      <span>Wanna see a cool trick?</span>
      <video
        src="https://twinbop.lol/twinbopped.mp4"
        width="240"
        height="160"
        controls
        controlsList="nodownload nofullscreen"
        loop
        style="margin-top: 10px; display: block"></video>
    </div>
    <img id="twinbopImg" src="https://teedata.net/api/skin/render/name/twinbop?emotion=default_eye" alt="twinbop" />
    <div id="prankText">
      <h1>
        You got twinbopped!
        <img src="https://teedata.net/api/skin/render/name/twinbop?emotion=happy_eye" alt="twinbop" />
      </h1>
      <a href="https://ddnet.org">Continue to ddnet.org</a>
    </div>
    <script>
      const angry = new Image();
      angry.src = 'https://teedata.net/api/skin/render/name/twinbop?emotion=angry_eye';
      const img = document.getElementById('twinbopImg');
      const text = document.getElementById('prankText');
      const trick = document.getElementById('bottomLeftTrick');
      let topPos = -200 + 108 / 2;
      let speed = 1;

      function animate() {
        const centerY = window.innerHeight / 2 - img.offsetHeight / 2;

        if (topPos < centerY - 300) {
          speed = 0.5; // slow creep
        } else if (topPos < centerY) {
          speed = 20; // speed up when close
          img.src = angry.src;
        } else {
          // scale image to fill the screen
          img.style.transition = 'transform 1s ease-in';
          img.style.transform = `scale(${(window.innerHeight / img.offsetHeight) * 100})`;

          // fade in the text after a short delay
          text.style.transition = 'opacity 1s ease-in 1s';
          text.style.opacity = '1';

          // fade in the bottom left trick 3 seconds after text appears
          setTimeout(() => {
            trick.style.opacity = '1';
          }, 3000);

          return; // stop animation
        }

        topPos += speed;
        img.style.top = topPos + 'px';
        requestAnimationFrame(animate);
      }

      window.onload = animate;
      window.addEventListener('resize', () => {
        img.style.left = '50%';
      });

      // Make video fullscreen when playback starts
      const video = document.querySelector('#bottomLeftTrick video');
      video.addEventListener('play', () => {
        if (video.requestFullscreen) {
          video.requestFullscreen();
        } else if (video.webkitRequestFullscreen) {
          video.webkitRequestFullscreen();
        } else if (video.msRequestFullscreen) {
          video.msRequestFullscreen();
        }
      });
    </script>
  </body>
</html>
